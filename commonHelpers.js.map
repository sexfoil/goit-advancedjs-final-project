{"version":3,"file":"commonHelpers.js","sources":["../src/js/localstorage.js","../src/js/modals.js","../src/js/favorites.js"],"sourcesContent":["// Назва ключа в LocalStorage\nconst LS_KEY = 'FavoriteExercises';\n\n// Запис Favorite exercise в LS\n// Очікуємо об'єкт exercise якщо не знаходимо в LS об'єкта з\n// таким-же id  додаємо об'єкт в LS\nfunction addToFavorites(newItem) {\n  let favoriteExercises = getFavoriteExercises();\n  const id = newItem._id;\n  if (!favoriteExercises.some(item => item._id === id)) {\n    const newItem = favoriteItem;\n    favoriteExercises.push(newItem);\n    localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n  }\n}\n\n// Видалення Favorite exercise з LS за _id\nfunction removeFromFavorite(id) {\n  let favoriteExercises = getFavoriteExercises();\n  favoriteExercises = favoriteExercises.filter(item => item._id !== id);\n  localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n  displayFavorites(); // Оновлення сторінки\n}\n\n// Получити список favorites з LS або []\nfunction getFavoriteExercises() {\n  return JSON.parse(localStorage.getItem(LS_KEY)) || [];\n}\n\n// Перевірка списка favorites чи е обʼєкт за id\nfunction checkFavoriteExercises(id) {\n  return getFavoriteExercises().some(item => item._id === id);\n}\n\nfunction displayFavorites() {\n  const favoriteExercises = getFavoriteExercises();\n  console.log(favoriteExercises);\n  // Відмалювати Favorites Page\n}\n\n/// FAKE EXERCISE\nconst favoriteItem = {\n  _id: '64f389465ae26083f39b17c2',\n  bodyPart: 'back',\n  equipment: 'barbell',\n  gifUrl: 'https://ftp.goit.study/img/power-pulse/gifs/0037.gif',\n  name: 'barbell decline wide-grip pullover',\n  target: 'lats',\n  description:\n    'These large back muscles are responsible for shoulder adduction and horizontal extension. Pull-ups and lat pulldowns are common exercises targeting the lats.',\n  rating: 3,\n  burnedCalories: 307,\n  time: 3,\n  popularity: 7415,\n};\n\n// const addToFavoritesBtn = document.querySelector('.add-to-favourite');\n// addToFavoritesBtn.addEventListener('click', () => {\n//   const id = addToFavoritesBtn.getAttribute('data-id');\n//   let favoriteExercises = favoriteExercises();\n//   if (!favoriteExercises.some(item => item._id === id)) {\n//     const newItem = favoriteItem; /// ДОДАТИ ЗАПИТ НА ОБЪЕКТ ПО _id !!!!\n//     favoriteExercises.push(newItem);\n//     localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n//   }\n// });\n\n// document.querySelectorAll('.remove-from-favourite').forEach(button => {\n//   button.addEventListener('click', () => {\n//     const id = button.getAttribute('data-id');\n//     removeFromFavorite(id);\n//   });\n// });\n\nexport {\n  favoriteItem,\n  addToFavorites,\n  removeFromFavorite,\n  checkFavoriteExercises,\n};\n","import { getExerciseById } from './api';\nimport { checkFavoriteExercises } from './localstorage';\n\nexport async function fillExerciseModal(exerciseId) {\n  const dataCellNames = {\n    bodyPart: 'Body Part',\n    burnedCalories: 'Burned Calories',\n    equipment: 'Equipment',\n    popularity: 'Popularity',\n    target: 'Target',\n    time: 'Time',\n  };\n\n  const elements = {\n    modal: document.querySelector('.modal-exercise'),\n    title: document.querySelector('.modal-exercise .title'),\n    rating: document.querySelector('.modal-exercise .rating'),\n    dataWrapper: document.querySelector('.modal-exercise .data-wrapper'),\n    description: document.querySelector('.modal-exercise .description'),\n    favouriteBtn: document.querySelector('.favourite-btn'),\n  };\n\n  elements.modal.setAttribute('data-exercise-id', exerciseId);\n\n  const data = await getExerciseById(exerciseId);\n\n  const { description, name, rating, gifUrl } = data;\n\n  if (gifUrl) {\n    elements.modal.insertAdjacentHTML(\n      'afterbegin',\n      `\n        <div class=\"image-wrapper\">\n          <image class=\"image\" src=\"${gifUrl}\" alt=\"${name}\" />\n        </div>\n      `\n    );\n  }\n\n  elements.title.innerHTML = name;\n  elements.rating.innerHTML = `${Number(rating).toFixed(1)}`;\n  elements.description.innerHTML = description;\n  elements.favouriteBtn.innerHTML = checkFavoriteExercises(exerciseId)\n    ? 'Remove from favorites'\n    : 'Add to favorites';\n\n  for (let dataCellName of Object.keys(dataCellNames)) {\n    if (data[dataCellName]) {\n      elements.dataWrapper.insertAdjacentHTML(\n        'beforeend',\n        `\n          <div class=\"data-cell\">\n            <div class=\"data-name\">${dataCellNames[dataCellName]}</div>\n            <div class=\"data-value\">${data[dataCellName]}</div>\n          </div>\n        `\n      );\n    }\n  }\n\n  const stars = document.querySelectorAll('.modal-exercise .star-icon');\n  let starsCounter = 0;\n\n  for (let star of stars) {\n    if (rating - starsCounter > 1) {\n      star.style.fill = '#eea10c';\n      starsCounter++;\n    } else {\n      const breakPoint = (rating - starsCounter) * 100;\n      star.insertAdjacentHTML(\n        'afterbegin',\n        `\n          <linearGradient id=\"linear-gradient\">\n            <stop offset=\"${breakPoint}%\" stop-color=\"#eea10c\"/>\n            <stop offset=\"${breakPoint}%\" stop-color=\"rgba(244, 244, 244, 0.2)\"/>\n          </linearGradient>\n        `\n      );\n      star.style.fill = 'url(#linear-gradient)';\n      break;\n    }\n  }\n}\n\nexport async function clearExerciseModal() {\n  const elements = {\n    modal: document.querySelector('.modal-exercise'),\n    imageWrapper: document.querySelector('.modal-exercise .image-wrapper'),\n    title: document.querySelector('.modal-exercise .title'),\n    rating: document.querySelector('.modal-exercise .rating'),\n    dataWrapper: document.querySelector('.modal-exercise .data-wrapper'),\n    description: document.querySelector('.modal-exercise .description'),\n    favouriteBtn: document.querySelector('.favourite-btn'),\n  };\n\n  elements.modal.removeAttribute('data-exercise-id');\n\n  if (elements.imageWrapper) {\n    elements.imageWrapper.remove();\n  }\n\n  elements.title.innerHTML = '';\n  elements.rating.innerHTML = '';\n  elements.description.innerHTML = '';\n  elements.dataWrapper.innerHTML = '';\n  elements.favouriteBtn.innerHTML = '';\n}\n","import { getExerciseCardHtml } from './utils/html-render';\nimport {\n  favoriteItem,\n  checkFavoriteExercises,\n  addToFavorites,\n  removeFromFavorite,\n} from './localstorage';\nimport { fillExerciseModal, clearExerciseModal } from './modals';\n\nconst favorites = document.querySelector('.exercises_content');\nlet elements;\n\nconst arr = [\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n];\nfavorites.innerHTML = getExerciseCardHtml(arr);\nconst exerciseItems = document.querySelectorAll('.exercises_item');\n\nfunction showExerciseModal(event) {\n  const exerciseId = event.target.closest('.exercises_item').id;\n  elements = {\n    closeBtn: document.querySelector('#modal-close-button'),\n    overlay: document.querySelector('.modal-overlay'),\n    favouriteBtn: document.querySelector('.favourite-btn'),\n  };\n\n  document.querySelector('.modal-overlay').classList.remove('display-none-js');\n\n  fillExerciseModal(exerciseId);\n\n  elements.closeBtn.addEventListener('click', closeExerciseModal);\n  elements.overlay.addEventListener('click', closeExerciseModal);\n  elements.favouriteBtn.addEventListener('click', handleFovouriteExercise);\n}\n\nfunction closeExerciseModal() {\n  document.querySelector('.modal-overlay').classList.add('display-none-js');\n\n  clearExerciseModal();\n\n  elements.closeBtn.removeEventListener('click', closeExerciseModal);\n  elements.overlay.removeEventListener('click', closeExerciseModal);\n  elements.favouriteBtn.removeEventListener('click', handleFovouriteExercise);\n}\n\nfunction handleFovouriteExercise(event) {\n  event.stopPropagation();\n\n  const exerciseId = event.target.closest('.modal-exercise').dataset.exerciseId;\n\n  if (checkFavoriteExercises(exerciseId)) {\n    removeFromFavorite(exerciseId);\n    elements.favouriteBtn.innerHTML = 'Add to favorites';\n  } else {\n    addToFavorites(exerciseId);\n    elements.favouriteBtn.innerHTML = 'Remove from favorites';\n  }\n}\n\nexerciseItems.forEach(item => {\n  item.addEventListener('click', showExerciseModal);\n});\nconsole.log(exerciseItems);\n// const h = getExerciseCardHtml([]);\n// console.log(h);\n// favorites.innerHTML = h;\n"],"names":["LS_KEY","addToFavorites","newItem","favoriteExercises","getFavoriteExercises","id","item","favoriteItem","removeFromFavorite","displayFavorites","checkFavoriteExercises","fillExerciseModal","exerciseId","dataCellNames","elements","data","getExerciseById","description","name","rating","gifUrl","dataCellName","stars","starsCounter","star","breakPoint","clearExerciseModal","favorites","arr","getExerciseCardHtml","exerciseItems","showExerciseModal","event","closeExerciseModal","handleFovouriteExercise"],"mappings":"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"}