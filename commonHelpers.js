import{g as b,a as E,d as S}from"./assets/mobile-e99d9e6c.js";import"./assets/vendor-b20efecd.js";const p="FavoriteExercises";function h(t){let r=m();const i=t._id;if(!r.some(s=>s._id===i)){const s=a;r.push(s),localStorage.setItem(p,JSON.stringify(r))}}function T(t){let r=m();r=r.filter(i=>i._id!==t),localStorage.setItem(p,JSON.stringify(r)),M()}function m(){return JSON.parse(localStorage.getItem(p))||[]}function x(t){return m().some(r=>r._id===t)}function M(){const t=m();console.log(t)}const a={_id:"64f389465ae26083f39b17c2",bodyPart:"back",equipment:"barbell",gifUrl:"https://ftp.goit.study/img/power-pulse/gifs/0037.gif",name:"barbell decline wide-grip pullover",target:"lats",description:"These large back muscles are responsible for shoulder adduction and horizontal extension. Pull-ups and lat pulldowns are common exercises targeting the lats.",rating:3,burnedCalories:307,time:3,popularity:7415},c={add:`
    <span>Add to favorites</span>
    <svg class="favorite-btn-icon" width="20" height="20">
      <use href="./img/icons.svg#icon-heart"></use>
    </svg>
  `,remove:`
    <span>Remove from favorites</span>
    <svg class="favorite-btn-icon" width="20" height="20">
      <use href="./img/icons.svg#icon-remove"></use>
    </svg>
  `};let e;async function q(t){const r={bodyPart:"Body part",burnedCalories:"Burned calories",equipment:"Equipment",popularity:"Popularity",target:"Target",time:"Time"};e={modal:document.querySelector(".modal-exercise"),loader:document.querySelector(".modal-exercise .loader"),modalContent:document.querySelector(".modal-exercise .modal-content"),imageWrapper:document.querySelector(".modal-exercise .image-wrapper"),title:document.querySelector(".modal-exercise .title"),rating:document.querySelector(".modal-exercise .rating"),ratingStars:document.querySelectorAll(".modal-exercise .star-icon"),dataWrapper:document.querySelector(".modal-exercise .data-wrapper"),description:document.querySelector(".modal-exercise .description"),favoriteBtn:document.querySelector(".modal-exercise .favorite-btn")},e.modal.setAttribute("data-exercise-id",t);try{const i=await b(t);if(i.statusText==="Bad Request")throw new Error(i.statusText||"Something went wrong");const{description:s,name:v,rating:u,gifUrl:g}=i;g&&(e.imageWrapper.innerHTML=`<img class="image" src="${g}" alt="${v}" />`),e.title.innerHTML=v,e.rating.innerHTML=`${Number(u).toFixed(1)}`,e.description.innerHTML=s,e.favoriteBtn.innerHTML=x(t)?c.remove:c.add;for(let o of Object.keys(r))i[o]&&e.dataWrapper.insertAdjacentHTML("beforeend",`
          <div class="data-cell">
            <div class="data-name">${r[o]}</div>
            <div class="data-value">${i[o]}</div>
          </div>
        `);let f=0;for(let o of e.ratingStars)if(u-f>1)o.style.fill="#eea10c",f++;else{const y=(u-f)*100;o.insertAdjacentHTML("afterbegin",`
          <linearGradient id="linear-gradient">
            <stop offset="${y}%" stop-color="#eea10c"/>
            <stop offset="${y}%" stop-color="rgba(244, 244, 244, 0.2)"/>
          </linearGradient>
        `),o.style.fill="url(#linear-gradient)";break}e.modalContent.classList.remove("display-none-js"),e.loader.classList.add("display-none-js")}catch(i){throw i}}function B(){e.modal.removeAttribute("data-exercise-id"),e.imageWrapper&&(e.imageWrapper.innerHTML=""),e.title.innerHTML="",e.rating.innerHTML="",e.description.innerHTML="",e.dataWrapper.innerHTML="",e.favoriteBtn.innerHTML="",e.modalContent.classList.add("display-none-js"),e.loader.classList.remove("display-none-js")}const H=document.querySelector(".exercises_content"),n=document.querySelector(".modal-overlay");let l;const w=[a,a,a,a,a,a,a,a,a];H.innerHTML=E(w);document.querySelectorAll(".exercises_item").forEach(t=>{t.addEventListener("click",k)});async function k(t){const r=t.target.closest(".exercises_item").id;n.classList.remove("display-none-js");try{await q(r),l={closeBtn:document.querySelector("#modal-close-button"),favoriteBtn:document.querySelector(".modal-exercise .favorite-btn")},n.addEventListener("click",d),l.closeBtn.addEventListener("click",d),l.favoriteBtn.addEventListener("click",L)}catch(i){S(i.message)}finally{n.classList.add("display-none-js")}}function d(){n.classList.add("display-none-js"),l.closeBtn.removeEventListener("click",d),n.removeEventListener("click",d),l.favoriteBtn.removeEventListener("click",L),B()}function L(t){t.stopPropagation();const r=t.target.closest(".modal-exercise").dataset.exerciseId;x(r)?(T(r),elements.favoriteBtn.innerHTML=c.add):(h(r),elements.favoriteBtn.innerHTML=c.remove),elements.favoriteBtn.blur()}
//# sourceMappingURL=commonHelpers.js.map
