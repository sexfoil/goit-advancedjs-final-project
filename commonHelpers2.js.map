{"version":3,"file":"commonHelpers2.js","sources":["../src/js/footer.js","../src/js/index.js"],"sourcesContent":["import { AxiosError } from 'axios';\nimport { subscribe } from './api.js';\nimport {\n  isWhitespacesOrEmpty,\n  displayWarning,\n  displayInfo,\n  HideableElement,\n  displayError,\n} from './utils/helpers.js';\n\nconst subscriptionForm = document.querySelector('.footer-subscribe-form');\nconst loader = new HideableElement(\n  subscriptionForm.querySelector('.input-loader'),\n  'input-loader'\n);\n\nsubscriptionForm.addEventListener('submit', onSubscriptionFormSubmit);\n\nfunction onSubscriptionFormSubmit(evt) {\n  evt.preventDefault();\n\n  const form = evt.currentTarget;\n  const email = new FormData(form).get('subscriber-email').trim();\n\n  if (isWhitespacesOrEmpty(email)) {\n    displayWarning('Email is empty');\n    return;\n  }\n\n  sendSubscriptionRequest(email);\n}\n\nasync function sendSubscriptionRequest(email) {\n  try {\n    loader.show();\n    const response = await subscribe(email);\n    if (response.status !== 201) {\n      throw new Error(response.data.message);\n    }\n    displayInfo(response.data.message);\n  } catch (err) {\n    displayError(err.message);\n  } finally {\n    loader.hide();\n    subscriptionForm.reset();\n  }\n}\n","import { getExerciseCardHtml, getCategoryCardHtml } from './utils/html-render';\nimport * as api from './api.js';\nimport { attribute } from './property/constants';\nimport { displayError } from './utils/helpers.js';\nimport { capitalize } from './utils/text-modifier';\n\nconst itemList = document.querySelector('.category_content');\nconst categoryList = document.querySelector('.exercises_nav');\nconst exerciseList = document.querySelector('.exercises_content');\nconst exerciseName = document.querySelector('.exercises_name');\nconst search = document.querySelector('.exercises_search');\nconst searchInput = document.querySelector('.exercises_search-input');\nconst searchButton = document.querySelector('.exercises_search-img');\n\nlet category = null;\nlet categorieValue = null;\n//Базовая инициализация\nconst categories = await api.getExercisesByCategory(1, 12);\nitemList.innerHTML = getCategoryCardHtml(categories.results);\n//Слушатели\nitemList.addEventListener('click', onCategoryListClick);\ncategoryList.addEventListener('click', onCategoryClick);\nsearchButton.addEventListener('click', onSearchButton);\nsearchInput.addEventListener('keydown', e => {\n  if (e.key === 'Enter') {\n    onSearchButton(e);\n  }\n});\n//Функции к слушателям\nasync function onSearchButton(event) {\n  event.preventDefault();\n\n  const { results } = await api.getExercisesByKeyword(\n    1,\n    10,\n    category,\n    categorieValue,\n    searchInput.value\n  );\n  itemList.innerHTML = '';\n  exerciseList.innerHTML = '';\n  exerciseList.innerHTML = getExerciseCardHtml(\n    results,\n    category,\n    categorieValue\n  );\n  console.log(results);\n}\nasync function onCategoryClick(event) {\n  try {\n    let target = event.target;\n    let contentTarget = target.textContent.trim();\n    let curentCategory = document.querySelector('.exercises__nav-item-current');\n\n    const toogleClass = async (curentCategory, target) => {\n      curentCategory.classList.remove('exercises__nav-item-current');\n      target.classList.add('exercises__nav-item-current');\n    };\n    const rendering = async (contentTarget, curentCategory) => {\n      const { results } = await api.getExercisesByCategory(\n        1,\n        12,\n        contentTarget\n      );\n      itemList.innerHTML = '';\n      exerciseList.innerHTML = '';\n      itemList.innerHTML = getCategoryCardHtml(results);\n      return;\n    };\n\n    toogleClass(curentCategory, target);\n    rendering(contentTarget, curentCategory);\n    exerciseName.style = 'display: none;';\n    search.style = 'display: none;';\n  } catch (error) {\n    displayError(error.message);\n  }\n}\n\nasync function onCategoryListClick(event) {\n  try {\n    event.preventDefault();\n\n    const data = event.target.dataset[attribute.DATA_INFO].split(\n      attribute.DATA_INFO_DELIMETER\n    );\n\n    category = data[0].toLowerCase();\n    categorieValue = data[1];\n\n    const fetchPromise = async (label, value) => {\n      return await api.getExercisesByKeyword(1, 12, label, value);\n    };\n\n    const handleResult = async ({ results }) => {\n      itemList.innerHTML = '';\n      exerciseList.innerHTML = getExerciseCardHtml(\n        results,\n        category,\n        categorieValue\n      );\n    };\n    const addExercisesName = () => {\n      exerciseName.style = 'display: block;';\n      exerciseName.textContent = capitalize(data[1]);\n      search.style = 'display: block';\n    };\n    fetchPromise(category, categorieValue)\n      .then(handleResult)\n      .catch(displayError);\n    addExercisesName();\n  } catch (error) {\n    displayError(error.message);\n  }\n}\n\n// const resp = await api.getExercisesByKeyword(1, 10, 'bodypart', 'back', 'back');\n// console.log(resp);\n\n// const quote = document.querySelector('.exercises_quote');\n// const q = await api.getQuote();\n// console.log(q);\n// quote.innerHTML = `\"${q.quote}\"<br><br> ${q.author}`;\n\n// const data = await api.subscribe('api34@mail.com');\n// console.log(data);\n\n// const rate = await api.rateExercise(\n//   '64f389465ae26083f39b17a2',\n//   5,\n//   'api33333@mail.com',\n//   'Cool'\n// );\n// console.log(rate);\n\ndocument.querySelector('.nav-item_home').classList.add('active');\ndocument.querySelector('.nav-item_favorites').classList.remove('active');\n\n// Scroll\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n    document.getElementById('scrollToTopButton').style.display = 'block';\n  } else {\n    document.getElementById('scrollToTopButton').style.display = 'none';\n  }\n}\n\n// Когда пользователь нажимает на кнопку\ndocument.getElementById('scrollToTopButton').onclick = function () {\n  document.body.scrollTop = 0; // Для Safari\n  document.documentElement.scrollTop = 0; // Для Chrome, Firefox, IE и Opera\n};\n"],"names":["subscriptionForm","loader","HideableElement","onSubscriptionFormSubmit","evt","form","email","isWhitespacesOrEmpty","displayWarning","sendSubscriptionRequest","response","subscribe","displayInfo","err","displayError","itemList","categoryList","exerciseList","exerciseName","search","searchInput","searchButton","category","categorieValue","categories","api.getExercisesByCategory","getCategoryCardHtml","onCategoryListClick","onCategoryClick","onSearchButton","e","event","results","api.getExercisesByKeyword","getExerciseCardHtml","target","contentTarget","curentCategory","toogleClass","rendering","error","data","attribute","fetchPromise","label","value","handleResult","addExercisesName","capitalize","scrollFunction"],"mappings":"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"}