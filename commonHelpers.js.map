{"version":3,"file":"commonHelpers.js","sources":["../src/js/localstorage.js","../src/js/favorites.js"],"sourcesContent":["// Назва ключа в LocalStorage\nconst LS_KEY = 'FavoriteExercises';\n\n// Запис Favorite exercise в LS\n// Очікуємо об'єкт exercise якщо не знаходимо в LS об'єкта з\n// таким-же id  додаємо об'єкт в LS\nfunction addToFavorites(newItem) {\n  let favoriteExercises = getFavoriteExercises();\n  const id = newItem._id;\n  if (!favoriteExercises.some(item => item._id === id)) {\n    const newItem = favoriteItem;\n    favoriteExercises.push(newItem);\n    localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n  }\n}\n\n// Видалення Favorite exercise з LS за _id\nfunction removeFromFavorite(id) {\n  let favoriteExercises = getFavoriteExercises();\n  favoriteExercises = favoriteExercises.filter(item => item._id !== id);\n  localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n  displayFavorites(); // Оновлення сторінки\n}\n\n// Получити список favorites з LS або []\nfunction getFavoriteExercises() {\n  return JSON.parse(localStorage.getItem(LS_KEY)) || [];\n}\n\n// Перевірка списка favorites чи е обʼєкт за id\nfunction checkFavoriteExercises(id) {\n  return getFavoriteExercises().some(item => item._id === id);\n}\n\nfunction displayFavorites() {\n  const favoriteExercises = getFavoriteExercises();\n  console.log(favoriteExercises);\n  // Відмалювати Favorites Page\n}\n\n/// FAKE EXERCISE\nconst favoriteItem = {\n  _id: '64f389465ae26083f39b17c2',\n  bodyPart: 'back',\n  equipment: 'barbell',\n  gifUrl: 'https://ftp.goit.study/img/power-pulse/gifs/0037.gif',\n  name: 'barbell decline wide-grip pullover',\n  target: 'lats',\n  description:\n    'These large back muscles are responsible for shoulder adduction and horizontal extension. Pull-ups and lat pulldowns are common exercises targeting the lats.',\n  rating: 3,\n  burnedCalories: 307,\n  time: 3,\n  popularity: 7415,\n};\n\n// const addToFavoritesBtn = document.querySelector('.add-to-favourite');\n// addToFavoritesBtn.addEventListener('click', () => {\n//   const id = addToFavoritesBtn.getAttribute('data-id');\n//   let favoriteExercises = favoriteExercises();\n//   if (!favoriteExercises.some(item => item._id === id)) {\n//     const newItem = favoriteItem; /// ДОДАТИ ЗАПИТ НА ОБЪЕКТ ПО _id !!!!\n//     favoriteExercises.push(newItem);\n//     localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n//   }\n// });\n\n// document.querySelectorAll('.remove-from-favourite').forEach(button => {\n//   button.addEventListener('click', () => {\n//     const id = button.getAttribute('data-id');\n//     removeFromFavorite(id);\n//   });\n// });\n\nexport {\n  favoriteItem,\n  addToFavorites,\n  removeFromFavorite,\n  checkFavoriteExercises,\n};\n","import { getFavoritesCardHtml } from './utils/html-render';\nimport {\n  favoriteItem,\n  checkFavoriteExercises,\n  addToFavorites,\n  removeFromFavorite,\n} from './localstorage';\nimport {\n  favoriteBtnContent,\n  fillExerciseModal,\n  clearExerciseModal,\n} from './modals';\nimport { displayError } from './utils/helpers';\n\nconst favorites = document.querySelector('.exercises_content');\nconst modalOverlay = document.querySelector('.modal-overlay');\n\nlet exerciseModalElements;\n\nconst arr = [\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n];\nfavorites.innerHTML = getFavoritesCardHtml(arr, 'Equipment', 'barbell');\n// document.querySelectorAll('.exercises_item').forEach(item => {\n//   item.addEventListener('click', showExerciseModal);\n// });\n\nasync function showExerciseModal(event) {\n  const exerciseId = event.target.closest('.exercises_item').id;\n\n  modalOverlay.classList.remove('display-none-js');\n\n  try {\n    await fillExerciseModal(exerciseId);\n\n    exerciseModalElements = {\n      closeBtn: document.querySelector('#modal-close-button'),\n      favoriteBtn: document.querySelector('.modal-exercise .favorite-btn'),\n    };\n\n    modalOverlay.addEventListener('click', closeExerciseModal);\n    exerciseModalElements.closeBtn.addEventListener(\n      'click',\n      closeExerciseModal\n    );\n    exerciseModalElements.favoriteBtn.addEventListener(\n      'click',\n      handleFovouriteExercise\n    );\n  } catch (error) {\n    displayError(error.message);\n  } finally {\n    modalOverlay.classList.add('display-none-js');\n  }\n}\n\nfunction closeExerciseModal() {\n  modalOverlay.classList.add('display-none-js');\n  exerciseModalElements.closeBtn.removeEventListener(\n    'click',\n    closeExerciseModal\n  );\n  modalOverlay.removeEventListener('click', closeExerciseModal);\n  exerciseModalElements.favoriteBtn.removeEventListener(\n    'click',\n    handleFovouriteExercise\n  );\n\n  clearExerciseModal();\n}\n\nfunction handleFovouriteExercise(event) {\n  event.stopPropagation();\n\n  const exerciseId = event.target.closest('.modal-exercise').dataset.exerciseId;\n\n  if (checkFavoriteExercises(exerciseId)) {\n    removeFromFavorite(exerciseId);\n    elements.favoriteBtn.innerHTML = favoriteBtnContent.add;\n  } else {\n    addToFavorites(exerciseId);\n    elements.favoriteBtn.innerHTML = favoriteBtnContent.remove;\n  }\n\n  elements.favoriteBtn.blur();\n}\n\n// const h = getExerciseCardHtml([]);\n// console.log(h);\n// favorites.innerHTML = h;\n\ndocument.querySelector('.nav-item_home').classList.remove('active');\ndocument.querySelector('.nav-item_favorites').classList.add('active');\n"],"names":["favoriteItem","favorites","arr","getFavoritesCardHtml"],"mappings":"oFAyCA,MAAMA,EAAe,CACnB,IAAK,2BACL,SAAU,OACV,UAAW,UACX,OAAQ,uDACR,KAAM,qCACN,OAAQ,OACR,YACE,gKACF,OAAQ,EACR,eAAgB,IAChB,KAAM,EACN,WAAY,IACd,ECxCMC,EAAY,SAAS,cAAc,oBAAoB,EACxC,SAAS,cAAc,gBAAgB,EAI5D,MAAMC,EAAM,CACVF,EACAA,EACAA,EACAA,EACAA,CACF,EACAC,EAAU,UAAYE,EAAqBD,EAAK,YAAa,SAAS,EAqEtE,SAAS,cAAc,gBAAgB,EAAE,UAAU,OAAO,QAAQ,EAClE,SAAS,cAAc,qBAAqB,EAAE,UAAU,IAAI,QAAQ"}