{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorites.js"],"sourcesContent":["import { getFavoritesCardHtml } from './utils/html-render';\nimport {\n  favoriteItem,\n  checkFavoriteExercises,\n  addToFavorites,\n  removeFromFavorite,\n} from './localstorage';\nimport {\n  favoriteBtnContent,\n  fillExerciseModal,\n  clearExerciseModal,\n} from './modals';\nimport { displayError } from './utils/helpers';\n\nconst favorites = document.querySelector('.exercises_content');\nconst modalOverlay = document.querySelector('.modal-overlay');\n\nlet exerciseModalElements;\n\nconst arr = [\n  // favoriteItem,\n  // favoriteItem,\n  // favoriteItem,\n  // favoriteItem,\n  // favoriteItem,\n];\nfavorites.innerHTML = getFavoritesCardHtml(arr, 'Equipment', 'barbell');\n\nfavorites.addEventListener('click', showExerciseModal);\n\nasync function showExerciseModal(event) {\n  const exerciseItem = event.target.closest('.exercises_item');\n\n  if (!exerciseItem) return;\n\n  const { id: exerciseId } = exerciseItem;\n\n  modalOverlay.classList.remove('display-none-js');\n\n  try {\n    await fillExerciseModal(exerciseId);\n\n    exerciseModalElements = {\n      closeBtn: document.querySelector('#modal-close-button'),\n      favoriteBtn: document.querySelector('.modal-exercise .favorite-btn'),\n    };\n\n    modalOverlay.addEventListener('click', closeExerciseModal);\n    exerciseModalElements.closeBtn.addEventListener(\n      'click',\n      closeExerciseModal\n    );\n    exerciseModalElements.favoriteBtn.addEventListener(\n      'click',\n      handleFovouriteExercise\n    );\n    document.addEventListener('keydown', handleEscClick);\n  } catch (error) {\n    modalOverlay.classList.add('display-none-js');\n    displayError(error.message);\n  }\n}\n\nfunction closeExerciseModal() {\n  modalOverlay.classList.add('display-none-js');\n  exerciseModalElements.closeBtn.removeEventListener(\n    'click',\n    closeExerciseModal\n  );\n  modalOverlay.removeEventListener('click', closeExerciseModal);\n  exerciseModalElements.favoriteBtn.removeEventListener(\n    'click',\n    handleFovouriteExercise\n  );\n\n  clearExerciseModal();\n}\n\nfunction handleFovouriteExercise(event) {\n  event.stopPropagation();\n\n  const exerciseId = event.target.closest('.modal-exercise').dataset.exerciseId;\n\n  if (checkFavoriteExercises(exerciseId)) {\n    removeFromFavorite(exerciseId);\n    exerciseModalElements.favoriteBtn.innerHTML = favoriteBtnContent.add;\n  } else {\n    addToFavorites(exerciseId);\n    exerciseModalElements.favoriteBtn.innerHTML = favoriteBtnContent.remove;\n  }\n\n  exerciseModalElements.favoriteBtn.blur();\n}\n\nfunction handleEscClick(event) {\n  if (event.key !== 'Escape') return;\n\n  closeExerciseModal();\n}\n\n// const h = getExerciseCardHtml([]);\n// console.log(h);\n// favorites.innerHTML = h;\n\ndocument.querySelector('.nav-item_home').classList.remove('active');\ndocument.querySelector('.nav-item_favorites').classList.add('active');\n"],"names":["favorites","modalOverlay","exerciseModalElements","arr","getFavoritesCardHtml","showExerciseModal","event","exerciseItem","exerciseId","fillExerciseModal","closeExerciseModal","handleFovouriteExercise","handleEscClick","error","displayError","clearExerciseModal","checkFavoriteExercises","removeFromFavorite","favoriteBtnContent","addToFavorites"],"mappings":"qIAcA,MAAMA,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAEJ,MAAMC,EAAM,CAMZ,EACAH,EAAU,UAAYI,EAAqBD,EAAK,YAAa,SAAS,EAEtEH,EAAU,iBAAiB,QAASK,CAAiB,EAErD,eAAeA,EAAkBC,EAAO,CACtC,MAAMC,EAAeD,EAAM,OAAO,QAAQ,iBAAiB,EAE3D,GAAI,CAACC,EAAc,OAEnB,KAAM,CAAE,GAAIC,CAAY,EAAGD,EAE3BN,EAAa,UAAU,OAAO,iBAAiB,EAE/C,GAAI,CACF,MAAMQ,EAAkBD,CAAU,EAElCN,EAAwB,CACtB,SAAU,SAAS,cAAc,qBAAqB,EACtD,YAAa,SAAS,cAAc,+BAA+B,CACzE,EAEID,EAAa,iBAAiB,QAASS,CAAkB,EACzDR,EAAsB,SAAS,iBAC7B,QACAQ,CACN,EACIR,EAAsB,YAAY,iBAChC,QACAS,CACN,EACI,SAAS,iBAAiB,UAAWC,CAAc,CACpD,OAAQC,EAAP,CACAZ,EAAa,UAAU,IAAI,iBAAiB,EAC5Ca,EAAaD,EAAM,OAAO,CAC3B,CACH,CAEA,SAASH,GAAqB,CAC5BT,EAAa,UAAU,IAAI,iBAAiB,EAC5CC,EAAsB,SAAS,oBAC7B,QACAQ,CACJ,EACET,EAAa,oBAAoB,QAASS,CAAkB,EAC5DR,EAAsB,YAAY,oBAChC,QACAS,CACJ,EAEEI,GACF,CAEA,SAASJ,EAAwBL,EAAO,CACtCA,EAAM,gBAAe,EAErB,MAAME,EAAaF,EAAM,OAAO,QAAQ,iBAAiB,EAAE,QAAQ,WAE/DU,EAAuBR,CAAU,GACnCS,EAAmBT,CAAU,EAC7BN,EAAsB,YAAY,UAAYgB,EAAmB,MAEjEC,EAAeX,CAAU,EACzBN,EAAsB,YAAY,UAAYgB,EAAmB,QAGnEhB,EAAsB,YAAY,MACpC,CAEA,SAASU,EAAeN,EAAO,CACzBA,EAAM,MAAQ,UAElBI,GACF,CAMA,SAAS,cAAc,gBAAgB,EAAE,UAAU,OAAO,QAAQ,EAClE,SAAS,cAAc,qBAAqB,EAAE,UAAU,IAAI,QAAQ"}