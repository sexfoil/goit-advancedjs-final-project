{"version":3,"file":"commonHelpers.js","sources":["../src/js/localstorage.js","../src/js/modals.js","../src/js/favorites.js"],"sourcesContent":["// Назва ключа в LocalStorage\nconst LS_KEY = 'FavoriteExercises';\n\n// Запис Favorite exercise в LS\n// Очікуємо об'єкт exercise якщо не знаходимо в LS об'єкта з\n// таким-же id  додаємо об'єкт в LS\nfunction addToFavorites(newItem) {\n  let favoriteExercises = getFavoriteExercises();\n  const id = newItem._id;\n  if (!favoriteExercises.some(item => item._id === id)) {\n    const newItem = favoriteItem;\n    favoriteExercises.push(newItem);\n    localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n  }\n}\n\n// Видалення Favorite exercise з LS за _id\nfunction removeFromFavorite(id) {\n  let favoriteExercises = getFavoriteExercises();\n  favoriteExercises = favoriteExercises.filter(item => item._id !== id);\n  localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n  displayFavorites(); // Оновлення сторінки\n}\n\n// Получити список favorites з LS або []\nfunction getFavoriteExercises() {\n  return JSON.parse(localStorage.getItem(LS_KEY)) || [];\n}\n\n// Перевірка списка favorites чи е обʼєкт за id\nfunction checkFavoriteExercises(id) {\n  return getFavoriteExercises().some(item => item._id === id);\n}\n\nfunction displayFavorites() {\n  const favoriteExercises = getFavoriteExercises();\n  console.log(favoriteExercises);\n  // Відмалювати Favorites Page\n}\n\n/// FAKE EXERCISE\nconst favoriteItem = {\n  _id: '64f389465ae26083f39b17c2',\n  bodyPart: 'back',\n  equipment: 'barbell',\n  gifUrl: 'https://ftp.goit.study/img/power-pulse/gifs/0037.gif',\n  name: 'barbell decline wide-grip pullover',\n  target: 'lats',\n  description:\n    'These large back muscles are responsible for shoulder adduction and horizontal extension. Pull-ups and lat pulldowns are common exercises targeting the lats.',\n  rating: 3,\n  burnedCalories: 307,\n  time: 3,\n  popularity: 7415,\n};\n\n// const addToFavoritesBtn = document.querySelector('.add-to-favourite');\n// addToFavoritesBtn.addEventListener('click', () => {\n//   const id = addToFavoritesBtn.getAttribute('data-id');\n//   let favoriteExercises = favoriteExercises();\n//   if (!favoriteExercises.some(item => item._id === id)) {\n//     const newItem = favoriteItem; /// ДОДАТИ ЗАПИТ НА ОБЪЕКТ ПО _id !!!!\n//     favoriteExercises.push(newItem);\n//     localStorage.setItem(LS_KEY, JSON.stringify(favoriteExercises));\n//   }\n// });\n\n// document.querySelectorAll('.remove-from-favourite').forEach(button => {\n//   button.addEventListener('click', () => {\n//     const id = button.getAttribute('data-id');\n//     removeFromFavorite(id);\n//   });\n// });\n\nexport {\n  favoriteItem,\n  addToFavorites,\n  removeFromFavorite,\n  checkFavoriteExercises,\n};\n","import { getExerciseById } from './api';\nimport { checkFavoriteExercises } from './localstorage';\n\nexport const favoriteBtnContent = {\n  add: `\n    <span>Add to favorites</span>\n    <svg class=\"favorite-btn-icon\" width=\"20\" height=\"20\">\n      <use href=\"./img/icons.svg#icon-heart\"></use>\n    </svg>\n  `,\n  remove: `\n    <span>Remove from favorites</span>\n    <svg class=\"favorite-btn-icon\" width=\"20\" height=\"20\">\n      <use href=\"./img/icons.svg#icon-remove\"></use>\n    </svg>\n  `,\n};\n\nlet elements;\n\nexport async function fillExerciseModal(exerciseId) {\n  const dataCellNames = {\n    bodyPart: 'Body part',\n    burnedCalories: 'Burned calories',\n    equipment: 'Equipment',\n    popularity: 'Popularity',\n    target: 'Target',\n    time: 'Time',\n  };\n\n  elements = {\n    modal: document.querySelector('.modal-exercise'),\n    loader: document.querySelector('.modal-exercise .loader'),\n    modalContent: document.querySelector('.modal-exercise .modal-content'),\n    imageWrapper: document.querySelector('.modal-exercise .image-wrapper'),\n    title: document.querySelector('.modal-exercise .title'),\n    rating: document.querySelector('.modal-exercise .rating'),\n    ratingStars: document.querySelectorAll('.modal-exercise .star-icon'),\n    dataWrapper: document.querySelector('.modal-exercise .data-wrapper'),\n    description: document.querySelector('.modal-exercise .description'),\n    favoriteBtn: document.querySelector('.modal-exercise .favorite-btn'),\n  };\n\n  elements.modal.setAttribute('data-exercise-id', exerciseId);\n\n  try {\n    const data = await getExerciseById(exerciseId);\n\n    if (data.statusText === 'Bad Request') {\n      throw new Error(data.statusText || 'Something went wrong');\n    }\n\n    const { description, name, rating, gifUrl } = data;\n\n    if (gifUrl) {\n      elements.imageWrapper.innerHTML = `<img class=\"image\" src=\"${gifUrl}\" alt=\"${name}\" />`;\n    }\n\n    elements.title.innerHTML = name;\n    elements.rating.innerHTML = `${Number(rating).toFixed(1)}`;\n    elements.description.innerHTML = description;\n    elements.favoriteBtn.innerHTML = checkFavoriteExercises(exerciseId)\n      ? favoriteBtnContent.remove\n      : favoriteBtnContent.add;\n\n    for (let dataCellName of Object.keys(dataCellNames)) {\n      if (data[dataCellName]) {\n        elements.dataWrapper.insertAdjacentHTML(\n          'beforeend',\n          `\n          <div class=\"data-cell\">\n            <div class=\"data-name\">${dataCellNames[dataCellName]}</div>\n            <div class=\"data-value\">${data[dataCellName]}</div>\n          </div>\n        `\n        );\n      }\n    }\n\n    let starsCounter = 0;\n\n    for (let star of elements.ratingStars) {\n      if (rating - starsCounter > 1) {\n        star.style.fill = '#eea10c';\n        starsCounter++;\n      } else {\n        const breakPoint = (rating - starsCounter) * 100;\n        star.insertAdjacentHTML(\n          'afterbegin',\n          `\n          <linearGradient id=\"linear-gradient\">\n            <stop offset=\"${breakPoint}%\" stop-color=\"#eea10c\"/>\n            <stop offset=\"${breakPoint}%\" stop-color=\"rgba(244, 244, 244, 0.2)\"/>\n          </linearGradient>\n        `\n        );\n        star.style.fill = 'url(#linear-gradient)';\n        break;\n      }\n    }\n\n    elements.modalContent.classList.remove('display-none-js');\n    elements.loader.classList.add('display-none-js');\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport function clearExerciseModal() {\n  elements.modal.removeAttribute('data-exercise-id');\n\n  if (elements.imageWrapper) {\n    elements.imageWrapper.innerHTML = '';\n  }\n\n  elements.title.innerHTML = '';\n  elements.rating.innerHTML = '';\n  elements.description.innerHTML = '';\n  elements.dataWrapper.innerHTML = '';\n  elements.favoriteBtn.innerHTML = '';\n\n  elements.modalContent.classList.add('display-none-js');\n  elements.loader.classList.remove('display-none-js');\n}\n","import { getExerciseCardHtml } from './utils/html-render';\nimport {\n  favoriteItem,\n  checkFavoriteExercises,\n  addToFavorites,\n  removeFromFavorite,\n} from './localstorage';\nimport {\n  favoriteBtnContent,\n  fillExerciseModal,\n  clearExerciseModal,\n} from './modals';\nimport { displayError } from './utils/helpers';\n\nconst favorites = document.querySelector('.exercises_content');\nconst modalOverlay = document.querySelector('.modal-overlay');\n\nlet exerciseModalElements;\n\nconst arr = [\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n  favoriteItem,\n];\nfavorites.innerHTML = getExerciseCardHtml(arr);\ndocument.querySelectorAll('.exercises_item').forEach(item => {\n  item.addEventListener('click', showExerciseModal);\n});\n\nasync function showExerciseModal(event) {\n  const exerciseId = event.target.closest('.exercises_item').id;\n\n  modalOverlay.classList.remove('display-none-js');\n\n  try {\n    await fillExerciseModal(exerciseId);\n\n    exerciseModalElements = {\n      closeBtn: document.querySelector('#modal-close-button'),\n      favoriteBtn: document.querySelector('.modal-exercise .favorite-btn'),\n    };\n\n    modalOverlay.addEventListener('click', closeExerciseModal);\n    exerciseModalElements.closeBtn.addEventListener(\n      'click',\n      closeExerciseModal\n    );\n    exerciseModalElements.favoriteBtn.addEventListener(\n      'click',\n      handleFovouriteExercise\n    );\n  } catch (error) {\n    displayError(error.message);\n  } finally {\n    modalOverlay.classList.add('display-none-js');\n  }\n}\n\nfunction closeExerciseModal() {\n  modalOverlay.classList.add('display-none-js');\n  exerciseModalElements.closeBtn.removeEventListener(\n    'click',\n    closeExerciseModal\n  );\n  modalOverlay.removeEventListener('click', closeExerciseModal);\n  exerciseModalElements.favoriteBtn.removeEventListener(\n    'click',\n    handleFovouriteExercise\n  );\n\n  clearExerciseModal();\n}\n\nfunction handleFovouriteExercise(event) {\n  event.stopPropagation();\n\n  const exerciseId = event.target.closest('.modal-exercise').dataset.exerciseId;\n\n  if (checkFavoriteExercises(exerciseId)) {\n    removeFromFavorite(exerciseId);\n    elements.favoriteBtn.innerHTML = favoriteBtnContent.add;\n  } else {\n    addToFavorites(exerciseId);\n    elements.favoriteBtn.innerHTML = favoriteBtnContent.remove;\n  }\n\n  elements.favoriteBtn.blur();\n}\n\n// const h = getExerciseCardHtml([]);\n// console.log(h);\n// favorites.innerHTML = h;\n\ndocument.querySelector('.nav-item_home').classList.remove('active');\ndocument.querySelector('.nav-item_favorites').classList.add('active');\n"],"names":["LS_KEY","addToFavorites","newItem","favoriteExercises","getFavoriteExercises","id","item","favoriteItem","removeFromFavorite","displayFavorites","checkFavoriteExercises","favoriteBtnContent","elements","fillExerciseModal","exerciseId","dataCellNames","data","getExerciseById","description","name","rating","gifUrl","dataCellName","starsCounter","star","breakPoint","error","clearExerciseModal","favorites","modalOverlay","exerciseModalElements","arr","getExerciseCardHtml","showExerciseModal","event","closeExerciseModal","handleFovouriteExercise","displayError"],"mappings":"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"}